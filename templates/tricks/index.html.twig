{% extends 'base.html.twig' %}

{% block body %}
    <h1 class="text-center">SnowTricks</h1>
    {% if is_granted('IS_AUTHENTICATED_FULLY') %}
        <p class="text-right" style="font-size: 2.5em;">
            <a class="nav-link" href="{{ path('new_trick') }}" style="text-align: right; margin-right: 2em;">&#43;</a>
        </p>
    {% endif %}
    <div id="tricks_block">
        {% for trick in tricks %}
            {% dump(loop.index) %}
            {% if loop.index == 1 or loop.index%5 == 0 %}
                <div class="row justify-content-center">
            {% endif %}
                {% set firstPicture = '' %}
                {% if trick.pictures and trick.pictures|first is not null %}
                    {% if trick.firstPicture is not null %}
                        {% set firstPicture = trick.pictures|first %}
                    {% endif %}
                {% endif %}
                {% set delete_id = trick.id %}
                {%
                    include 'tricks/card.html.twig'
                    with {
                        'id': trick.id,
                        'delete_id': delete_id,
                        'name': trick.name,
                        'description': trick.description,
                        'picture': firstPicture
                    }
                %}
            {% if loop.index%4 == 0 %}
                </div>
            {% endif %}
        {% endfor %}
    </div>
    <button type="button" class="btn btn-info" id="loadMoreTricksBtn">Load More</button>
    <input id="pageType" type="hidden" value="trick_index">

{% endblock %}
